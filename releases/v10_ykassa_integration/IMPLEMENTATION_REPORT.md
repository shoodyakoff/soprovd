# üìã –û–¢–ß–ï–¢ –û –í–´–ü–û–õ–ù–ï–ù–ò–ò - –¢–ó v10.1 –ÆKassa Integration

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 19 –¥–µ–∫–∞–±—Ä—è 2024 (–ø–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è) + 29 –∏—é–Ω—è 2025 (–≤—Ç–æ—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è) + 30 –∏—é–Ω—è 2025 (—Ç—Ä–µ—Ç—å—è –∏—Ç–µ—Ä–∞—Ü–∏—è)  
**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** AI Assistant  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (–≤–∫–ª—é—á–∞—è UX/UI –¥–æ—Ä–∞–±–æ—Ç–∫–∏, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É)  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~4 —á–∞—Å–∞ (–ø–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è) + ~2 —á–∞—Å–∞ (–≤—Ç–æ—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è) + ~2 —á–∞—Å–∞ (—Ç—Ä–µ—Ç—å—è –∏—Ç–µ—Ä–∞—Ü–∏—è)

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ –ü–µ—Ä–≤–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è (19 –¥–µ–∫–∞–±—Ä—è 2024)
- [x] –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ÆKassa API
- [x] –°–æ–∑–¥–∞–Ω–∏–µ payment_service.py
- [x] –°–æ–∑–¥–∞–Ω–∏–µ webhook_handler.py
- [x] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ handlers –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- [x] –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- [x] –ë–∞–∑–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### ‚úÖ –í—Ç–æ—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è (29 –∏—é–Ω—è 2025) - UX/UI –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- [x] –£–ª—É—á—à–µ–Ω–Ω—ã–π UX –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- [x] –û—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Premium
- [x] –ö–Ω–æ–ø–∫–∞ "–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ" –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- [x] –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ webhook —Å–æ–±—ã—Ç–∏–π
- [x] –¢–µ—Å—Ç–æ–≤—ã–π endpoint –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ webhook
- [x] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ –ë–î
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

### üü¢ –ò—Ç–µ—Ä–∞—Ü–∏—è 3 (v10.1.1) - –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- –í–Ω–µ–¥—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è Premium: –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–ø–ª–∞—Ç–µ –ø–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è, –∞ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ event loop (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ HTTP), constraint (—Å—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π), UX (–æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã), —Ç–µ—Å—Ç–æ–≤–æ–≥–æ endpoint (—Ä–µ–∞–ª—å–Ω—ã–π Telegram ID), –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç-–∫–µ–π—Å–∞—Ö
- –ü–æ–¥—Ä–æ–±–Ω–µ–µ: —Å–º. TZ_NUANCES_REPORT_v3.md

### üü¢ –ò—Ç–µ—Ä–∞—Ü–∏—è 4 (v10.1.2) - –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –Ω–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å `pending` —Å—Ç–∞—Ç—É—Å–æ–º –ø–ª–∞—Ç–µ–∂–µ–π –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ webhook'–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/subscription` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- –î–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_user_limits` –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ `period_end` –∏ `is_active`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º letter_session
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- –¶–µ–Ω–∞ Premium ‚Äî 1‚ÇΩ —Ç–æ–ª—å–∫–æ –≤ —Å—Å—ã–ª–∫–µ –Ω–∞ –æ–ø–ª–∞—Ç—É (UI –∏ —Ç–µ–∫—Å—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [x] –ò–∑—É—á–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- [x] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Ç–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π (—Ä—É—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ @shoodyakoff)
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [x] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### ‚úÖ –≠—Ç–∞–ø 2: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [x] –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ÆKassa
- [x] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [x] –°–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- [x] –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω rollback –ø–ª–∞–Ω

### ‚úÖ –≠—Ç–∞–ø 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### 3.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] **config.py** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ÆKassa
  - YOOKASSA_SHOP_ID, YOOKASSA_SECRET_KEY
  - WEBHOOK_HOST, WEBHOOK_PORT, WEBHOOK_PATH
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–ª–∞—Ç–µ–∂–µ–π

#### 3.2 –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [x] **requirements.txt** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
  - yookassa==3.0.0
  - fastapi==0.104.1
  - uvicorn==0.24.0

#### 3.3 –°–µ—Ä–≤–∏—Å—ã
- [x] **services/payment_service.py** - —Å–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å –ø–ª–∞—Ç–µ–∂–µ–π
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –ÆKassa API
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤
  - –ê–∫—Ç–∏–≤–∞—Ü–∏—è Premium –ø–æ–¥–ø–∏—Å–æ–∫
  - Fallback –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ —Å–±–æ—è—Ö
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook'–æ–≤
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ `pending` –ø–ª–∞—Ç–µ–∂–µ–π

- [x] **services/subscription_service.py** - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
  - activate_premium_subscription() –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ payment_id –≤ –ø–æ–¥–ø–∏—Å–∫–∞—Ö
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ upgraded_at
  - –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –≤–º–µ—Å—Ç–æ –∑–∞–º–µ–Ω—ã
  - –§—É–Ω–∫—Ü–∏—è `check_user_limits` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `period_end` –∏ `is_active`

#### 3.4 Webhook Handler
- [x] **webhook_handler.py** - —Å–æ–∑–¥–∞–Ω FastAPI —Å–µ—Ä–≤–µ—Ä
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤ –æ—Ç –ÆKassa
  - Health check endpoints
  - –¢–µ—Å—Ç–æ–≤—ã–π endpoint
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

#### 3.5 Handlers
- [x] **handlers/simple_conversation_v6.py** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
  - –û–±–Ω–æ–≤–ª–µ–Ω handle_premium_inquiry() –¥–ª—è –ÆKassa
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
  - –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `subscription_info_command` –¥–ª—è –∫–æ–º–∞–Ω–¥—ã `/subscription`
  - Fallback –Ω–∞ —Ä—É—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
  - –¢—Ä–µ–∫–∏–Ω–≥ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

#### 3.6 –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- [x] **utils/keyboards.py** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  - get_payment_keyboard() - —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É
  - get_payment_success_keyboard() - —É—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
  - get_payment_error_keyboard() - –æ—à–∏–±–∫–∞ –æ–ø–ª–∞—Ç—ã
  - get_payment_processing_keyboard() - –æ–±—Ä–∞–±–æ—Ç–∫–∞

#### 3.7 Main Application
- [x] **main.py** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞
  - –ó–∞–ø—É—Å–∫ webhook —Å–µ—Ä–≤–µ—Ä–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ÆKassa –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞

#### 3.8 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [x] **–ú–∏–≥—Ä–∞—Ü–∏—è v10.1_add_yookassa_payments.sql** - —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∞
  - –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ payments
  - –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ subscriptions
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

- [x] **–ú–∏–≥—Ä–∞—Ü–∏—è v10.1.1_fix_payment_constraints.sql** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ constraint
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω constraint –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ 'succeeded'
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π

### ‚úÖ –≠—Ç–∞–ø 4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### 4.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [x] **env.example** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ÆKassa
  - YOOKASSA_SHOP_ID, YOOKASSA_SECRET_KEY
  - WEBHOOK_HOST, WEBHOOK_PORT, WEBHOOK_PATH
  - –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### 4.2 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–µ–ª–∏–∑–∞
- [x] **README.md** - –æ–±–Ω–æ–≤–ª–µ–Ω —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ÆKassa
  - 7 —ç—Ç–∞–ø–æ–≤ –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏
  - –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

- [x] **CHANGELOG_v10.md** - —Å–æ–∑–¥–∞–Ω –ø–æ–¥—Ä–æ–±–Ω—ã–π changelog
  - –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –°–ø–∏—Å–æ–∫ –Ω–æ–≤—ã—Ö –∏ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏
  - –ü–ª–∞–Ω—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ rollback

#### 4.3 –ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
- [x] **active_tasks.md** - –æ–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å
  - v10.1 –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–π
  - v10.2 –æ—Ç–º–µ—á–µ–Ω –∫–∞–∫ –Ω–µ —Ç—Ä–µ–±—É—é—â–∏–π—Å—è
  - –†–µ–ª–∏–∑ –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è
```
Telegram Bot ‚Üí Payment Service ‚Üí –ÆKassa API
                ‚Üì
            Webhook Handler ‚Üê –ÆKassa Webhook
                ‚Üì
            Subscription Service ‚Üí Database
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
1. **Fallback –ª–æ–≥–∏–∫–∞** - –ø—Ä–∏ —Å–±–æ—è—Ö –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç –∫ —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–µ
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook'–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - webhook —Å–µ—Ä–≤–µ—Ä –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
5. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - —Ç–µ—Å—Ç–æ–≤—ã–µ endpoints –∏ –¥–∞–Ω–Ω—ã–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –°–±–æ–∏ –ÆKassa API ‚Üí fallback –Ω–∞ —Ä—É—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
- –û—à–∏–±–∫–∏ webhook ‚Üí retry –ª–æ–≥–∏–∫–∞
- –ü—Ä–æ–±–ª–µ–º—ã –ë–î ‚Üí graceful degradation
- –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –ÆKassa API
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤ –æ—Ç –ÆKassa
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è Premium –ø–æ–¥–ø–∏—Å–æ–∫
- ‚úÖ Fallback –Ω–∞ —Ä—É—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–∏ —Å–±–æ—è—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–ø–ª–∞—Ç–µ
- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `/subscription` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å `pending` —Å—Ç–∞—Ç—É—Å–æ–º –ø–ª–∞—Ç–µ–∂–µ–π

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞ < 10 —Å–µ–∫—É–Ω–¥
- ‚úÖ Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ < 5 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook'–æ–≤ (–∑–∞–≥–ª—É—à–∫–∞)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ PII
- ‚úÖ Rate limiting —Å–æ—Ö—Ä–∞–Ω–µ–Ω

## üß™ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook'–æ–≤
- [x] –ê–∫—Ç–∏–≤–∞—Ü–∏—è Premium –ø–æ–¥–ø–∏—Å–∫–∏
- [x] Fallback –ª–æ–≥–∏–∫–∞
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –ü–æ–ª–Ω—ã–π —Ñ–ª–æ—É –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [x] Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- [x] –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è –¥–µ–ø–ª–æ—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω:
1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ÆKassa** - –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å webhook
2. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π** - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö** - –¥–æ–±–∞–≤–∏—Ç—å –∫–ª—é—á–∏ –≤ Railway
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ñ–ª–æ—É
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –∏ –º–µ—Ç—Ä–∏–∫–∏

### –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω:
1. **–ú–æ–¥–µ—Ä–∞—Ü–∏—è –ÆKassa** - –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π** - –∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –Ω–∞ –±–æ–µ–≤—ã–µ
3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ webhook** - —É–±–µ–¥–∏—Ç—å—Å—è –≤ —Ä–∞–±–æ—Ç–µ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω URL
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É `/subscription`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ](tasks/TZ_v10_1_Ykassa_Integration.md)
- [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ](README.md#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—ékassa---–ø–æ—à–∞–≥–æ–≤–∞—è-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
- [CHANGELOG](CHANGELOG_v10.md)
- [DEPLOYMENT](DEPLOYMENT.md)

### –ö–æ–Ω—Ç–∞–∫—Ç—ã
- **Lead Developer:** @shoodyakoff
- **–ÆKassa –ø–æ–¥–¥–µ—Ä–∂–∫–∞:** support@yookassa.ru
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** https://yookassa.ru/developers/

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ó–ê–í–ï–†–®–ï–ù–ê  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** –ì–û–¢–û–í –ö –î–ï–ü–õ–û–Æ  
**–ö–∞—á–µ—Å—Ç–≤–æ:** –°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ –¢–ó  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ü–û–õ–ù–ê–Ø 

## üîß –í—Ç–æ—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è - UX/UI –¥–æ—Ä–∞–±–æ—Ç–∫–∏ (29 –∏—é–Ω—è 2025)

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

#### 4.1 –£–ª—É—á—à–µ–Ω–Ω—ã–π UX –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- [x] **–û—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Premium**
  - –ü–æ–∫–∞–∑ –ª–∏–º–∏—Ç–æ–≤ (20 –ø–∏—Å–µ–º –≤ –¥–µ–Ω—å)
  - –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
  - –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–µ–∫—Ç–∞
  - –ö–Ω–æ–ø–∫–∞ "–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ"

#### 4.2 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [x] **send_premium_activation_notification()** - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ Telegram API
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ bot instance –∏–∑ webhook_handler
  - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π

#### 4.3 –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ webhook —Å–æ–±—ã—Ç–∏–π**
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ webhook
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

#### 4.4 –¢–µ—Å—Ç–æ–≤—ã–π endpoint
- [x] **POST /webhook/yookassa/test** - –Ω–æ–≤—ã–π endpoint
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ webhook —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö payment_id
  - –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

#### 4.5 –ù–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
- [x] **get_premium_activation_keyboard()** - –Ω–æ–≤–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞
  - –ö–Ω–æ–ø–∫–∞ "‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ"
  - –ö–Ω–æ–ø–∫–∞ "üìä –ú–æ—è –ø–æ–¥–ø–∏—Å–∫–∞"
  - –ö–Ω–æ–ø–∫–∞ "üÜï –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –ø–∏—Å—å–º–æ"

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–≤—Ç–æ—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è)

#### services/payment_service.py
- [x] –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `send_premium_activation_notification()`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_send_premium_activation_message()`
- [x] –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `process_webhook()`
- [x] –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `_handle_successful_payment()`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_activate_premium_subscription()`

#### webhook_handler.py
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `set_bot_instance()` –∏ `get_bot_instance()`
- [x] –î–æ–±–∞–≤–ª–µ–Ω endpoint `POST /webhook/yookassa/test`
- [x] –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ webhook —Å–æ–±—ã—Ç–∏–π

#### utils/keyboards.py
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ `get_premium_activation_keyboard()`

#### main.py
- [x] –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ bot instance –≤ webhook_handler

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –≤—Ç–æ—Ä–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```
Webhook ‚Üí payment_service ‚Üí webhook_handler ‚Üí bot instance ‚Üí Telegram API ‚Üí User
```

#### –ú–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–¥–∞—á–∏ bot instance
1. **main.py** —Å–æ–∑–¥–∞–µ—Ç application –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç bot –≤ webhook_handler
2. **webhook_handler** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç bot instance –≥–ª–æ–±–∞–ª—å–Ω–æ
3. **payment_service** –ø–æ–ª—É—á–∞–µ—Ç bot instance –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞
- –õ–æ–≥–∏—Ä—É—é—Ç—Å—è –æ—à–∏–±–∫–∏ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –î–æ–±–∞–≤–ª–µ–Ω—ã —ç–º–æ–¥–∑–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ 

## v10.1.2 (–∏—é–ª—å 2025)
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã —ç–∫—Ä–∞–Ω –æ–ø–ª–∞—Ç—ã —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- –ù–∞ —ç–∫—Ä–∞–Ω–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Premium —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–ø—Ä–æ–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ"
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º letter_session
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- –¶–µ–Ω–∞ Premium ‚Äî 1‚ÇΩ —Ç–æ–ª—å–∫–æ –≤ —Å—Å—ã–ª–∫–µ –Ω–∞ –æ–ø–ª–∞—Ç—É (UI –∏ —Ç–µ–∫—Å—Ç—ã –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/subscription` –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å `pending` —Å—Ç–∞—Ç—É—Å–æ–º –ø–ª–∞—Ç–µ–∂–µ–π
- –î–æ—Ä–∞–±–æ—Ç–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_user_limits` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–ø–∏—Å–∫–µ 