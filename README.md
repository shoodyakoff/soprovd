# LetterGenius - Telegram-бот для генерации сопроводительных писем

## Описание

LetterGenius - это Telegram-бот, который помогает соискателям генерировать персонализированные сопроводительные письма для вакансий. Бот использует GPT-4o от OpenAI для создания естественных и релевантных писем.

## Функциональность

- Сбор информации о вакансии от пользователя
- Получение резюме кандидата
- Выбор стиля письма (Нейтральный, Смелый, Формальный)
- Генерация персонализированного сопроводительного письма
- Обработка ошибок и повторные попытки генерации

## Установка и настройка

### Требования

- Python 3.8+
- Telegram Bot Token
- OpenAI API Key

### 1. Клонирование и установка зависимостей

```bash
# Установка зависимостей
pip install -r requirements.txt
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
TELEGRAM_BOT_TOKEN=ваш_телеграм_токен
OPENAI_API_KEY=ваш_openai_api_ключ
```

**Где взять токены:**

- **Telegram Bot Token**: 
  1. Напишите [@BotFather](https://t.me/botfather) в Telegram
  2. Создайте нового бота командой `/newbot`
  3. Скопируйте полученный токен

- **OpenAI API Key**:
  1. Зарегистрируйтесь на [platform.openai.com](https://platform.openai.com)
  2. Перейдите в раздел API Keys
  3. Создайте новый ключ

### 3. Запуск бота

```bash
python main.py
```

## Структура проекта

```
letter_genius_bot/
├── main.py              # Точка входа
├── config.py            # Конфигурация и константы
├── requirements.txt     # Зависимости
├── README.md           # Документация
├── handlers/
│   ├── __init__.py
│   ├── start.py         # Обработчик /start
│   ├── conversation.py  # Основной флоу сбора данных
│   └── callback.py      # Обработчик кнопок
├── services/
│   ├── __init__.py
│   └── openai_service.py # Логика работы с OpenAI
└── utils/
    ├── __init__.py
    ├── prompts.py       # Промпты для OpenAI
    └── keyboards.py     # Inline-клавиатуры
```

## Использование

1. Запустите бота командой `/start`
2. Отправьте описание вакансии
3. Отправьте свое резюме
4. Выберите стиль письма с помощью кнопок
5. Получите готовое сопроводительное письмо

## Команды бота

- `/start` - Начать создание письма
- `/cancel` - Отменить текущий процесс

## Технические особенности

- Используется ConversationHandler для управления состояниями
- Автоматические повторные попытки при неполных ответах от OpenAI
- Проверка корректности ввода данных
- Обработка ошибок и таймаутов
- Поддержка fallback модели GPT-4 при недоступности GPT-4o

## Логирование

Бот ведет подробные логи работы, включая:
- Получение данных от пользователей
- Попытки генерации писем
- Ошибки взаимодействия с API
- Общую статистику использования

## Безопасность

- Все API ключи хранятся в переменных окружения
- Данные пользователей очищаются после генерации письма
- Нет постоянного хранения персональных данных 